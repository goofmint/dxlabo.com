---
layout: post
title:  "データを削除する際のフロー"
date:   2018-02-23 12:00:00 +0900
categories: DX ワークフロー
excerpt_separator: <!--more-->
---

開発者であれば一度は深刻な操作ミスをしたり、しそうになってひやっとした覚えがあるはずです。もちろん、どんな仕事をしている人にでもあるのですが、特に開発者はデータベースやファイルサーバなど、企業活動の根幹を担うようなデータを扱います。そうした中でミスすると大変な事態につながります。

<!--more-->

そこで開発者向けサービスを提供している場合、データの削除や大事な処理に対して特に慎重になる必要があるでしょう。今回はその例を三つ紹介します。

## GitHubの場合

GitHubで該当するのはリポジトリの削除でしょう。リポジトリの削除はSettingの中、Danger Zoneにあります。このDanger Zoneという名称と赤い枠で警戒を促すのが良い方法です。

![GitHubのDanger Zone](/images/data-delete-1.png)

さらに削除を実行する際にはリポジトリ名を入力させて、間違いないか確認します。

![リポジトリ名入力](/images/data-delete-2.png)

このステップを経て、はじめてリポジトリが削除できます。

## Pusherの場合

Pusherも同じくDanger Zoneの中に削除があります。

![PusherのDanger Zone](/images/data-delete-6.png)

こちらは確認ダイアログだけです。しかし確認は単なるプロンプトではなく、独自の警告が分かりやすいものになっています。また、独自なのでマウスで選ぶ必要があり、間違ってエンターキーを連続で押したために削除されることがないようになっています。

![確認ダイアログ](/images/data-delete-7.png)

## Gmailの場合

Gmailでよくあるミスはメール送信ミスです。送信直後に取り消しというリンクが表示されます。

![Gmailの送信直後](/images/data-delete-3.png)

ミスした時にはこれをクリックすれば送信がキャンセルできます。つまり送信は一旦キューに入り、数秒間であればキャンセルできるようになっているということでしょう。若干のタイムラグを作ることでミスを防止できるのは良い仕組みです。

![送信取り消し](/images/data-delete-5.png)

Gmailでは同様に添付というキーワードがある時に添付ファイルがないと確認を促すようになっています。送信したが最後、取り戻せないメールというシステム上、こうした自動的な確認機能が効果的です。

----

誤ったデータ削除、更新はよくあることです。データベースであればトランザクションを使ってデータを元に戻すことができますが、DROP TABLEのようにトランザクションが効かない処理もありますし、大抵ミスする時にはトランザクションを使っていません。そうした時にも直接データベースを操作するのではなく、ミス防止が組み込まれたソフトウェアを介するのが良いでしょう。
